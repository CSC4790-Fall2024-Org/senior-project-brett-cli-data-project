version: 2

project_name: pipeterm

builds:
  - id: pipeterm
    main: ./main.go
    goos:
      - darwin
      - linux
    goarch:
      - amd64
      - arm64
    ldflags:
      - -s -w -X main.version={{.Version}}

archives:
  - id: default
    format: tar.gz
    name_template: "{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}"

checksums:
  - id: default
    name_template: "checksums.txt"

brews:
  - id: pipeterm
    name: pipeterm
    tap:
      owner: brfloyd
      name: homebrew-pipeterm
    commit_author:
      name: "Brett Floyd"
      email: "brfloyd19@gmail.com"
    homepage: "https://github.com/brfloyd/pipeterm"
    description: "Local data lake and pipeline tool"
    install: |
      bin.install "pipeterm"
    dependencies:
      - go
    test: |
      system "#{bin}/pipeterm", "--version"

release:
  github:
    owner: brfloyd
    name: pipeterm
